
# LLM Code Deployment

This project is a **FastAPI-based automation system** that builds, deploys, and updates web applications using an **LLM (Large Language Model)** like Google Gemini.
It is part of a university assignment to demonstrate how AI can automatically generate, deploy, and revise web apps on GitHub.

---

## What This Project Does

The system can:

1. **Receive a task request** from an instructor (as a JSON POST).
2. **Verify a secret** to make sure the request is valid.
3. **Use an LLM** to generate a web app (HTML, README, LICENSE).
4. **Create or update a GitHub repository** automatically.
5. **Deploy the app** to **GitHub Pages**.
6. **Send back repo details** (repo URL, commit SHA, and Pages URL) to an evaluation server.
7. **Handle revisions (Round 2)** ‚Äî when a new task update arrives, it updates and redeploys the app.

---

## How It Works (Simplified)

1. Instructor sends a JSON task like this:

   ```json
   {
     "email": "student@example.com",
     "secret": "YOUR_SECRET_HERE",
     "task": "markdown-to-html-123",
     "round": 1,
     "nonce": "abc123",
     "brief": "Create a markdown-to-HTML converter page.",
     "evaluation_url": "https://example.com/notify",
     "attachments": []
   }
   ```

2. The FastAPI app:

   * Checks that the secret matches.
   * Uses Gemini to generate HTML, README, and LICENSE.
   * Creates a GitHub repo.
   * Enables GitHub Pages.
   * Sends the repo details back to the evaluation server.

3. For round 2 or later, it clones the existing repo, updates files, and redeploys.

---

## Setup Instructions

### 1. Prerequisites

Make sure you have:

* **Python 3.10+**
* A **GitHub Personal Access Token**
* A **Gemini API Key**
* Git installed on your system

---

### 2. Installation

```bash
# Clone the project
git clone https://github.com/YOUR_USERNAME/llm-code-deployment.git
cd llm-code-deployment

# Install dependencies
pip install -r requirements.txt
```

---

### 3. Environment Variables

Create a `.env` file in the project root with these values:

```bash
# === Student configuration ===
STUDENT_SECRET=your_secret_key
GITHUB_USERNAME=your_github_username

# === GitHub Access ===
GITHUB_TOKEN=your_personal_access_token

# === Gemini LLM Access ===
GEMINI_API_KEY=your_gemini_api_key
```

---

### 4. Run the API Locally

```bash
uvicorn main:app --host 0.0.0.0 --port 7860
```

The app will be available at [http://localhost:7860](http://localhost:7860)

You can check status:

```bash
curl http://localhost:7860/
```

---

### 5. Test the Endpoint

Use a tool like `curl` or Postman:

```bash
curl -X POST http://localhost:7860/ready \
  -H "Content-Type: application/json" \
  -d '{
    "email": "student@example.com",
    "secret": "YOUR_SECRET_HERE",
    "task": "hello-world-app",
    "round": 1,
    "nonce": "12345",
    "brief": "Create a simple webpage that displays Hello World.",
    "evaluation_url": "https://httpbin.org/post",
    "attachments": []
  }'
```

Expected response:

```json
{"status": "ready", "message": "Task hello-world-app received and processing started."}
```

---

## üìÅ Project Structure

```
‚îú‚îÄ‚îÄ main.py              # Main FastAPI app logic
‚îú‚îÄ‚îÄ models.py            # Data models for task requests
‚îú‚îÄ‚îÄ config.py            # Loads settings and secrets
‚îú‚îÄ‚îÄ requirements.txt     # Python dependencies
‚îú‚îÄ‚îÄ Dockerfile           # For containerized deployment
‚îú‚îÄ‚îÄ .env                 # Your local environment variables
‚îî‚îÄ‚îÄ generated_tasks/     # Folder where generated apps are saved
```

## üßæ License

This project includes an **MIT License** automatically generated by the system.
You are free to modify, reuse, or extend it for educational purposes.

---